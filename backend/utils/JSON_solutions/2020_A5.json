{
  "year": "2020",
  "question_number": "5",
  "domain": "Putnam",
  "statement": "",
  "solution": [
    {
      "hint_level": 0,
      "content": "The answer is $n=F_{4040}-1$. In both solutions, we use freely the identity\n\\begin{equation} \\label{eq:2020A5eq1}\nF_1+F_2+\\cdots+F_{m-2} = F_m-1\n\\end{equation}\nwhich follows by a straightforward induction on $m$.\nWe also use the directly computed values\n\\begin{equation} \\label{eq:2020A5eq2}\na_1 = a_2 = 2, a_3 = a_4 = 3.\n\\end{equation}\n\n\\noindent\n\\textbf{First solution.} (by George Gilbert)\n\nWe extend the definition of $a_n$ by setting $a_0 = 1$.\n\n\\setcounter{lemma}{0}\n\\begin{lemma}\nFor $m>0$ and $F_m \\leq n < F_{m+1}$, \n\\begin{equation} \\label{eq:2020A5eq3}\na_n = a_{n-F_m} + a_{F_{m+1}-n-1}.\n\\end{equation}\n\\end{lemma}\n\\begin{proof}\nConsider a set $S$ for which $\\sum_{k \\in S} F_k = n$.\nIf $m \\in S$ then $S \\setminus \\{m\\}$ gives a representation of $n-F_m$, and this construction is reversible because $n-F_m < F_{m-1} \\leq F_m$.\nIf $m \\notin S$, then $\\{1,\\dots,m-1\\} \\setminus S$ gives a representation of $F_{m+1} - n - 1$, and this construction is also reversible.\nThis implies the desired equality.\n\\end{proof}\n\n\\begin{lemma}\nFor $m \\geq 2$,\n\\[\na_{F_m} = a_{F_{m+1}-1} = \\left\\lfloor \\frac{m+2}{2} \\right\\rfloor.\n\\]\n\\end{lemma}\n\\begin{proof}\nBy \\eqref{eq:2020A5eq2}, this holds for $m=2,3,4$. We now proceed by induction; for $m \\geq 5$, given all preceding cases,\nwe have by Lemma 1 that\n\\begin{align*}\na_{F_m} &= a_0 + a_{F_{m-1}-1} = 1 + \\left\\lfloor \\frac{m}{2} \\right\\rfloor =  \\left\\lfloor \\frac{m+2}{2} \\right\\rfloor \\\\\na_{F_{m+1}-1} &= a_{F_{m-1}-1} + a_0 = a_{F_m}. \\qedhere\n\\end{align*}\n\\end{proof}\n\nUsing Lemma 2, we see that $a_n = 2020$ for $n = F_{4040}-1$.\n\n\\begin{lemma}\nFor $F_m \\leq n < F_{m+1}$, $a_n \\geq a_{F_m}$.\n\\end{lemma}\n\\begin{proof}\nWe again induct on $m$.\nBy Lemma 2, we may assume that \n\\begin{equation} \\label{eq:2020A5eq4}\n1 \\leq n -F_m \\leq (F_{m+1}-2) - F_m = F_{m-1} - 2.\n\\end{equation}\nBy \\eqref{eq:2020A5eq2}, we may also assume $n \\geq 6$, so that $m \\geq 5$. We apply Lemma 1, keeping in mind that\n\\[\n(n-F_m) + (F_{m+1}-n-1) = F_{m-1}-1.\n\\]\nIf $\\max\\{n-F_m, F_{m+1}-n-1\\} \\geq F_{m-2}$, then one of the summands in \\eqref{eq:2020A5eq3} \nis at least $a_{F_{m-2}}$ (by the induction hypothesis) and the other is at least 2 (by \\eqref{eq:2020A5eq4} and the induction hypothesis),\nso \n\\[\na_n \\geq a_{F_{m-2}}+2 = \\left\\lfloor \\frac{m+4}{2} \\right\\rfloor. \n\\]\nOtherwise,\n$\\min\\{n-F_m, F_{m+1}-n-1\\} \\geq F_{m-3}$ and so by the induction hypothesis again,\n\\[\na_n \\geq 2a_{F_{m-3}} = 2 \\left\\lfloor \\frac{m-1}{2} \\right\\rfloor \\geq 2 \\frac{m-2}{2} \\geq \\left\\lfloor \\frac{m+2}{2} \\right\\rfloor. \\qedhere\n\\]\n\\end{proof}\n\nCombining Lemma 2 and Lemma 3, we deduce that for $n > F_{4040}-1$, we have $a_n \\geq a_{F_{4040}} = 2021$. This completes the proof.\n\n\\noindent\n\\textbf{Second solution.}\nWe again start with a computation of some special values of $a_n$.\n\n\\setcounter{lemma}{0}\n\\begin{lemma}\nFor all $m \\geq 1$,\n\\[\na_{F_m-1} = \\left\\lfloor \\frac{m+1}2 \\right\\rfloor\n\\]\n\\end{lemma}\n\\begin{proof}\nWe proceed by induction on $m$. The result holds for $m=1$ and $m=2$ by \\eqref{eq:2020A5eq2}. For $m>2$, among the sets $S$ counted by $a_{F_m-1}$,\nby \\eqref{eq:2020A5eq1} the only one not containing $m-1$ is $S=\\{1,2,\\ldots,m-2\\}$,\nand there are $a_{F_m-F_{m-1}-1}$ others. Therefore, \n\\begin{align*}\na_{F_m-1} &= a_{F_m-F_{m-1}-1} + 1\\\\\n& = a_{F_{m-2}-1}+1 = \\left\\lfloor \\frac{m-1}2 \\right\\rfloor+1 = \\left\\lfloor \\frac{m+1}2 \\right\\rfloor. \\qedhere\n\\end{align*}\n\\end{proof}\n\nGiven an arbitrary positive integer $n$,\ndefine the set $S_0$ as follows:\nstart with the largest $k_1$ for which $F_{k_1} \\leq n$, then add the largest $k_2$ for which $F_{k_1} + F_{k_2} \\leq n$, and so on,\nstopping once $\\sum_{k \\in S_0} F_k = n$.\nThen form the bitstring \n\\[\ns_n = \\cdots e_1 e_0, \\qquad e_k = \\begin{cases} 1 & k \\in S_0 \\\\\n0 & k \\notin S_0;\n\\end{cases}\n\\]\nnote that no two 1s in this string are consecutive. We can thus divide $s_n$ into segments\n\\[\nt_{k_1,\\ell_1} \\cdots t_{k_r, \\ell_r} \\qquad (k_i, \\ell_i \\geq 1)\n\\]\nwhere the bitstring $t_{k,\\ell}$ is given by\n\\[\nt_{k,\\ell} = (10)^k (0)^\\ell\n\\]\n(that is, $k$ repetitions of $10$ followed by $\\ell$ repetitions of 0).\nNote that $\\ell_r \\geq 1$ because $e_1 = e_0 = 0$.\n\nFor $a = 1,\\dots,k$ and $b = 0,\\dots,\\lfloor (\\ell-1)/2 \\rfloor$, we can replace $t_{k,\\ell}$ with the string\nof the same length\n\\[\n(10)^{k-a} (0) (1)^{2a-1} (01)^b 1 0^{\\ell -2b}\n\\]\nto obtain a new bitstring corresponding to a set $S$ with $\\sum_{k \\in S} F_k = n$. Consequently,\n\\begin{equation} \\label{eq:2020A5eq3}\na_n \\geq \\prod_{i=1}^r \\left( 1 + k_i \\left\\lfloor \\frac{\\ell_i+1}{2} \\right\\rfloor \\right).\n\\end{equation}\n\nFor integers $k,\\ell \\geq 1$, we have\n\\[\n1 + k \\left \\lfloor \\frac{\\ell+1}{2} \\right\\rfloor\n\\geq k + \\left \\lfloor \\frac{\\ell+1}{2} \\right\\rfloor \\geq 2.\n\\]\nCombining this with repeated use of the inequality\n\\[\nxy \\geq x+y \\qquad (x,y \\geq 2),\n\\]\nwe deduce that\n\\[\na_n \\geq \\sum_{i=1}^r \\left( k_i + \\left\\lfloor \\frac{\\ell_i+1}{2} \\right\\rfloor \\right)\n\\geq \\left\\lfloor \\frac{1 + \\sum_{i=1}^r (2k_i + \\ell_i)}{2} \\right\\rfloor.\n\\]\nIn particular, for any even $m \\geq 2$, we have $a_n > \\frac{m}2$ for all $n \\geq F_m$.\nTaking $m = 4040$ yields the desired result.\n\n\\noindent\n\\textbf{Remark.}\nIt can be shown with a bit more work that the set $S_0$ gives the unique representation of $n$ as a sum of distinct Virahanka--Fibonacci numbers, no two consecutive; this is commonly called the\n\\emph{Zeckendorf representation} of $n$, but was first described by Lekkerkerker.\nUsing this property, one can show that the lower bound in \\eqref{eq:2020A5eq3} is sharp."
    }
  ]
}