{
  "year": "2012",
  "question_number": "6",
  "domain": "Putnam",
  "statement": "",
  "solution": [
    {
      "hint_level": 0,
      "content": "\\textbf{First solution.}\nYes, $f(x,y)$ must be identically 0. We proceed using a series of lemmas.\n\n\\setcounter{lemma}{0}\n\\begin{lemma}\nLet $R$ be a rectangular region of area $1$ with corners $A,B,C,D$ labeled in counterclockwise order. Then\n$f(A) + f(C) = f(B) + f(D)$.\n\\end{lemma}\n\\begin{proof}\nWe may choose coordinates so that for some $c>0$,\n\\[\nA = (0,0), B = (c,0), C = (c,1/c), D = (0, 1/c).\n\\]\nDefine the functions\n\\begin{align*}\ng(x,y) &= \\int_x^{x+c} f(t,y)\\,dt \\\\\nh(x,y) &= \\int_0^y g(x,u)\\,du.\n\\end{align*}\nFor any $x,y \\in \\RR$,\n\\[\nh(x,y+1/c) - h(x,y) = \\int_x^{x+c} \\int_y^{y+1/c} f(t,u)\\,dt\\,du = 0\n\\]\nby hypothesis, so $h(x,y+1/c) = h(x,y)$. By the fundamental theorem of calculus,\nwe may differentiate both sides of this identity with respect to $y$ to deduce that\n$g(x,y+1/c) = g(x,y)$. Differentiating this new identity with respect to $x$ yields the desired equality.\n\\end{proof}\n\n\\begin{lemma}\nLet $C$ be a circle whose diameter $d$ is at least $\\sqrt{2}$, and let $AB$ and $A'B'$ be two diameters of $C$. Then\n$f(A) + f(B) = f(A') + f(B')$.\n\\end{lemma}\n\\begin{proof}\nBy continuity, it suffices to check the case where $\\alpha = \\arcsin \\frac{2}{d^2}$\nis an irrational multiple of $2\\pi$.\nLet $\\beta$ be the radian measure of the counterclockwise arc from $A$ to $A'$.\nBy Lemma~1, the claim holds when $\\beta = \\alpha$. By induction, the claim also holds when $\\beta \\equiv n\\alpha\n\\pmod{2\\pi}$ for any positive integer $n$. Since $\\alpha$ is an irrational multiple of $2\\pi$, the positive multiples of $\\alpha$ fill out a dense subset of the real numbers modulo $2\\pi$,\nso by continuity the claim holds for all $\\beta$.\n\\end{proof}\n\n\\begin{lemma}\nLet $R$ be a rectangular region of arbitrary (positive) area with corners $A,B,C,D$ labeled in counterclockwise order. Then\n$f(A) + f(C) = f(B) + f(D)$.\n\\end{lemma}\n\\begin{proof}\nLet $EF$ be a segment such that $AEFD$ and $BEFC$ are rectangles whose diagonals have length at least $\\sqrt{2}$. By Lemma~2,\n\\begin{align*}\nf(A) + f(F) &= f(D) + f(E) \\\\\nf(C) + f(E) &= f(B) + f(F),\n\\end{align*}\nyielding the claim.\n\\end{proof}\n\n\\begin{lemma}\nThe restriction of $f$ to any straight line is constant.\n\\end{lemma}\n\\begin{proof}\nWe may choose coordinates so that the line in question is the $x$-axis.\nDefine the function $g(y)$ by\n\\[\ng(y) = f(0,y) - f(0,0).\n\\]\nBy Lemma~3, for all $x \\in \\RR$,\n\\[\nf(x,y) = f(x,0) + g(y).\n\\]\nFor any $c>0$, by the original hypothesis we have\n\\begin{align*}\n0 &= \\int_x^{x+c} \\int_y^{y+1/c} f(u,v)\\,du\\,dv \\\\\n&= \\int_x^{x+c} \\int_y^{y+1/c} (f(u,0) + g(v))\\,du\\,dv \\\\\n&= \\frac{1}{c} \\int_x^{x+c} f(u,0)\\,du + c \\int_y^{y+1/c} g(v)\\,dv.\n\\end{align*}\nIn particular, the function $F(x) = \\int_x^{x+c} f(u,0)\\,du$ is constant.\nBy the fundamental theorem of calculus, we may differentiate to conclude that\n$f(x+c,0) = f(x,0)$ for all $x \\in \\RR$. Since $c$ was also arbitrary, we deduce the claim.\n\\end{proof}\n\nTo complete the proof, note that\nsince any two points in $\\RR^2$ are joined by a straight line, Lemma~4 implies that $f$ is constant.\nThis constant equals the integral of $f$ over any rectangular region of area 1, and hence must be 0\nas desired.\n\n\\noindent\n\\textbf{Second solution} (by Eric Larson, communicated by Noam Elkies).\nIn this solution, we fix coordinates and\nassume only that the double integral vanishes on each rectangular region of area 1\nwith sides parallel to the coordinate axes, and still conclude that $f$ must be identically 0.\n\n\\setcounter{lemma}{0}\n\\begin{lemma*}\nLet $R$ be a rectangular region of area $1$ with sides parallel to the coordinate axes.\nThen the averages of $f$ over any two adjacent sides of $R$ are equal.\n\\end{lemma*}\n\\begin{proof}\nWithout loss of generality, we may take $R$ to have corners $(0, 0), (c,0), (c,1/c), (0,1/c)$ and consider\nthe two sides adjacent to $(c,1/c)$. Differentiate the equality\n\\[\n0 = \\int_x^{x+c} \\int_y^{y+1/c} f(u,v)\\,du\\,dv\n\\]\nwith respect to $c$ to obtain\n\\[\n0 = \\int_y^{y+1/c} f(x+c,v)\\,dv - \\frac{1}{c^2} \\int_x^{x+c} f(u,y+1/c)\\,du.\n\\]\nRearranging yields\n\\[\nc \\int_y^{y+1/c} f(x+c,v)\\,dv = \\frac{1}{c} \\int_x^{x+c} f(u,y+1/c)\\,du,\n\\]\nwhich asserts the desired result.\n\\end{proof}\n\nReturning to the original problem, given any $c>0$, we can tile the plane with rectangles of area 1 whose\nvertices lie in the lattice $\\{(mc, n/c): m,n \\in \\ZZ\\}$. By repeated application of the lemma,\nwe deduce that for any positive integer $n$,\n\\[\n\\int_0^c f(u,0)\\,du = \\int_{nc}^{(n+1)c} f(u,0)\\,du.\n\\]\nReplacing $c$ with $c/n$, we obtain\n\\[\n\\int_0^{c/n} f(u,0)\\,du = \\int_{c}^{c+1/n} f(u,0)\\,du.\n\\]\nFixing $c$ and taking the limit as $n \\to \\infty$ yields $f(0,0) = f(c,0)$. By similar reasoning,\n$f$ is constant on any horizontal line and on any vertical line, and as in the first solution the constant\nvalue is forced to equal 0.\n\n\\noindent\n\\textbf{Third solution.} (by Sergei Artamoshin) We retain the weaker hypothesis of the second solution. Assume by way of contradiction that $f$ is not identically zero.\n\nWe first exhibit a vertical segment $PQ$ with $f(P) > 0$ and $f(Q) < 0$.\nIt cannot be the case that $f(P) \\leq 0$ for all $P$, as otherwise the vanishing of the zero over any rectangle would force $f$ to vanish identically. By continuity, there must exist an open disc $U$ such that $f(P) > 0$ for all $P \\in U$. Choose a rectangle $R$ of area $1$ with sides parallel to the coordinate axes with one horizontal edge contained in $U$. Since the integral of $f$ over $R$ is zero, there must exist a point $Q \\in R$ such that $f(Q) < 0$. Take $P$ to be the vertical projection of $Q$ onto the edge of $R$ contained in $U$.\n\nBy translating coordinates, we may assume that $P = (0,0)$ and\n$Q = (0,a)$ for some $a>0$.\nFor $s$ sufficiently small, $f$ is positive on the square of side length $2s$ centered at $P$, which we call $S$, and negative on the square of side length $2s$ centered at $Q$, which we call $S'$. Since the ratio $2s/(1-4s^2)$ tends to 0 as $s$ does, we can choose $s$ so that\n$2s/(1-4s^2) = a/n$ for some positive integer $n$.\n\nFor $i \\in \\ZZ$, let $A_i$ be the rectangle\n\\begin{multline*}\n\\left\\{(x,y): s \\leq x \\leq s + \\frac{1-4s^2}{2s},\\right. \\\\\n\\qquad \\left. -s+i \\frac{2s}{1-4s^2} \\leq y \\leq s + i \\frac{2s}{1-4s^2} \\right\\}\n\\end{multline*}\nand let $B_i$ be the rectangle\n\\begin{multline*}\n\\left\\{(x,y): s \\leq x \\leq s + \\frac{1-4s^2}{2s}, \\right.  \\\\\n\\qquad \\left. s+i \\frac{2s}{1-4s^2} \\leq y \\leq -s + (i+1) \\frac{2s}{1-4s^2} \\right\\}.\n\\end{multline*}\nThen for all $i \\in \\ZZ$,\n\\[\nS \\cup A_0, A_n \\cup S', A_i \\cup B_i, B_i \\cup A_{i+1}\n\\]\nare all rectangles of area 1 with sides parallel to the coordinate axes,\nso the integral over $f$ over each of these rectangles is zero.\nSince the integral over $S$ is positive, the integral over $A_0$ must be negative; by induction, for all $i \\in \\ZZ$ the integral over $A_i$ is negative and the integral over $B_i$ is positive. But this forces the integral over $S'$ to be positive whereas $f$ is negative everywhere on $S'$, a contradiction."
    }
  ]
}