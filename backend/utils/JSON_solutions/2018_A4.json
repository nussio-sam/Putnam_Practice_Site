{
  "year": "2018",
  "question_number": "4",
  "domain": "Putnam",
  "statement": "",
  "solution": [
    {
      "hint_level": 0,
      "content": "\\noindent\n\\textbf{First solution.}\nWe prove the claim by induction on $m+n$.\nFor the base case, suppose that $n=1$; we then have $m=1$ and the given equation becomes $gh=e$. The claim then reduces to the fact that a one-sided inverse in $G$ is also a two-sided inverse. (Because $G$ is a group, $g$ has an inverse $g^{-1}$; since $gh = e$, we have $h = g^{-1}(gh) = g^{-1} e = g^{-1}$, so $hg = e = gh$.)\n\nSuppose now that $n>1$. In case $m>n$, set $\\tilde{g} = g h$, $\\tilde{h} = h$, and\n\\[\nb_k = \\left\\lfloor \\frac{(m-n)k}{n} \\right\\rfloor - \\left\\lfloor \\frac{(m-n)(k-1)}{n} \\right\\rfloor \n\\quad (k=1,\\dots,n).\n\\]\nthen\n\\[\n\\tilde{g} \\tilde{h}^{b_1} \\cdots \\tilde{g} \\tilde{h}^{b_n} = gh^{a_1} \\cdots gh^{a_n} = e,\n\\]\nso the induction hypothesis implies that $\\tilde{g}$ and $\\tilde{h}$ commute; this implies that $g$ and $h$ commute.\n\nIn case $m < n$, note that $a_k \\in \\{0,1\\}$ for all $k$. Set $\\tilde{g} = h^{-1}$, $\\tilde{h} = g^{-1}$, and\n\\[\nb_l = \\left\\lfloor \\frac{n \\ell}{m} \\right\\rfloor - \\left\\lfloor \\frac{n(\\ell-1)}{m} \\right\\rfloor \n\\quad (\\ell=1,\\dots,m);\n\\]\nwe claim that \n\\[\n\\tilde{g}\\tilde{h}^{b_1}\\cdots\\tilde{g}\\tilde{h}^{b_m} = (gh^{a_1}\\cdots gh^{a_n})^{-1} = e,\n\\]\nso the induction hypothesis implies that $\\tilde{h}$ and $\\tilde{g}$ commute; this implies that $g$ and $h$ commute.\n\nTo clarify this last equality, consider a lattice walk starting from $(0,0)$, ending at $(n,m)$, staying below the line\n$y = mx/n$, and keeping as close to this line as possible. If one follows this walk and records the element $g$ for each horizontal step and $h$ for each vertical step, one obtains the word $gh^{a_1}\\cdots gh^{a_n}$. \nNow take this walk, reflect across the line $y = x$, rotate by a half-turn, then translate to put the endpoints at $(0,0)$ and $(m,n)$; this is the analogous walk for the pair $(n,m)$.\n\n\\noindent\n\\textbf{Remark.}\nBy tracing more carefully through the argument, one sees in addition that there exists an element $k$ of $G$\nfor which $g = k^m, h = k^{-n}$.\n\n\\noindent\n\\textbf{Second solution.} (by Greg Martin)\nSince $\\gcd(m,n) = 1$, there exist integers $x,y$ such that $mx + ny = 1$; we may further assume that \n$x \\in \\{1,\\dots,n\\}$. We first establish the identity\n\\[\na_{k-x} = \\begin{cases}\na_k - 1 & \\mbox{if $k \\equiv 0 \\pmod{n}$} \\\\\na_k + 1 & \\mbox{if $k \\equiv 1 \\pmod{n}$} \\\\\na_k & \\mbox{otherwise}.\n\\end{cases}\n\\]\nNamely, by writing $-mx = ny-1$, we see that\n\\begin{align*}\na_{k-x} &= \\left\\lfloor \\frac{m(k-x)}{n} \\right\\rfloor - \\left\\lfloor \\frac{m(k-x-1)}{n} \\right\\rfloor\n\\\\\n&= \\left\\lfloor \\frac{mk+ny-1}{n} \\right\\rfloor - \\left\\lfloor \\frac{m(k-1)+ny-1}{n} \\right\\rfloor \\\\\n&= \\left\\lfloor \\frac{mk-1}{n} \\right\\rfloor - \\left\\lfloor \\frac{m(k-1)-1}{n} \\right\\rfloor\n\\end{align*}\nand so\n\\begin{align*}\na_{k-x} - a_k &= \\left( \\left\\lfloor \\frac{mk-1}{n} \\right\\rfloor - \\left\\lfloor \\frac{mk}{n} \\right\\rfloor \\right)\n\\\\\n&\\quad\n- \\left( \\left\\lfloor \\frac{m(k-1)-1}{n} \\right\\rfloor - \\left\\lfloor \\frac{m(k-1)}{n} \\right\\rfloor \\right).\n\\end{align*}\nThe first parenthesized expression equals 1 if $n$ divides $mk$, or equivalently $n$ divides $k$, and 0 otherwise.\nSimilarly, the second parenthesized expression equals 1 if $n$ divides $k-1$ and 0 otherwise. This proves the stated identity.\n\nWe now use the given relation $g h^{a_1} \\cdots g h^{a_n} = e$ to write\n\\begin{align*}\nghg^{-1}h^{-1} &= gh(h^{a_1} g h^{a_2} \\cdots gh^{a_{n-1}} g h^{a_n})h^{-1} \\\\\n&= gh^{a_1+1} gh^{a_2} \\cdots gh^{a_{n-1}} gh^{a_n-1} \\\\\n&= gh^{a_{1-x}} \\cdots gh^{a_{n-x}} \\\\\n&= (gh^{a_{n+1-x}} \\cdots gh^{a_{n}}) (gh^{a_1} \\cdots gh^{a_{n-x}}).\n\\end{align*}\nThe two parenthesized expressions multiply in the opposite order to $g h^{a_1} \\cdots g h^{a_n} = e$, so they must be\n(two-sided) inverses of each other. We deduce that $ghg^{-1} h^{-1} = e$, meaning that $g$ and $h$ commute.\n\n\\noindent\n\\textbf{Third solution.} (by Sucharit Sarkar)\nLet $T$ denote the torus $\\mathbb{R}^2/\\mathbb{Z}^2$. The line segments from $(0,0)$ to $(1,0)$ and from $(0,0)$ to $(0,1)$ are closed loops in $T$, and we denote them by $g$ and $h$ respectively. Now let $p$ be the (image of the) point $(\\epsilon,-\\epsilon)$ in $T$ for some $0<\\epsilon\\ll 1$. The punctured torus $T \\setminus \\{p\\}$ deformation retracts onto the union of the loops $g$ and $h$, and so $\\pi_1(T\\setminus\\{p\\})$, the fundamental group of $T\\setminus\\{p\\}$ based at $(0,0)$, is the free group on two generators, $\\langle g,h\\rangle$.\n\nLet $\\gamma$ and $\\tilde{\\gamma}$ denote the following loops based at $(0,0)$ in $T$: $\\gamma$ is the image of the line segment from $(0,0)$ to $(n,m)$ under the projection $\\mathbb{R}^2 \\to T$, and $\\tilde{\\gamma}$ is the image of the lattice walk from $(0,0)$ to $(n,m)$, staying just below the line $y=mx/n$, that was described in the first solution. There is a straight-line homotopy with fixed endpoints between the two paths in $\\mathbb{R}^2$ from $(0,0)$ to $(n,m)$, the line segment and the lattice walk, and this homotopy does not pass through any point of the form $(a+\\epsilon,b-\\epsilon)$ for $a,b\\in\\mathbb{Z}$ by the construction of the lattice walk. It follows that $\\gamma$ and $\\tilde{\\gamma}$ are homotopic loops in $T \\setminus \\{p\\}$. Since the class of $\\tilde{\\gamma}$ in $\\pi_1(T\\setminus\\{p\\})$ is evidently $gh^{a_1}gh^{a_2}\\cdots gh^{a_n}$, it follows that the class of $\\gamma$ in $\\pi_1(T\\setminus\\{p\\})$ is the same.\n\nNow since $\\gcd(m,n)=1$, there is an element $\\phi \\in GL_2(\\mathbb{Z})$ sending $(n,m)$ to $(1,0)$, which then sends the line segment from $(0,0)$ to $(n,m)$ to the segment from $(0,0)$ to $(1,0)$. Then $\\phi$ induces a homeomorphism of $T$ sending $\\gamma$ to $g$, which in turn induces an isomorphism $\\phi_* :\\thinspace \\pi_1(T\\setminus \\{p\\}) \\to \\pi_1(T\\setminus \\{\\phi^{-1}(p)\\})$. Both fundamental groups are equal to $\\langle g,h\\rangle$, and we conclude that $\\phi_*$ sends $gh^{a_1}gh^{a_2}\\cdots gh^{a_n}$ to $g$. It follows that $\\phi_*$ induces an isomorphism\n\\[\n\\langle g,h\\,|\\,gh^{a_1}gh^{a_2}\\cdots gh^{a_n} \\rangle \\to \\langle g,h \\,|\\, g\\rangle \\cong \\langle h\\rangle \\cong \\mathbb{Z}.\n\\]\n\nSince $\\mathbb{Z}$ is abelian, $g$ and $h$ must commute in $\\langle g,h\\,|\\,gh^{a_1}gh^{a_2}\\cdots gh^{a_n}\\rangle$, whence they must also commute in $G$."
    }
  ]
}