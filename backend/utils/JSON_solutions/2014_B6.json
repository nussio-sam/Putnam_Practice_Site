{
  "year": "2014",
  "question_number": "6",
  "domain": "Putnam",
  "statement": "",
  "solution": [
    {
      "hint_level": 0,
      "content": "Let us say that a linear function $g$ on an interval is \\emph{integral} if it has the form\n$g(x) = a + bx$ for some $a,b \\in \\ZZ$, and that a piecewise linear function is \\emph{integral} if on every interval where it is linear, it is also integral.\n\nFor each positive integer $n$, define the $n$-th \\emph{Farey sequence} $F_n$ as the sequence of rational numbers in $[0,1]$ with denominators at most $n$.\nIt is easily shown by induction on $n$ that any two consecutive elements $\\frac{r}{s}, \\frac{r'}{s'}$ of $F_n$, written in lowest terms, satisfy $\\gcd(s,s') = 1$, $s+s' > n$, and $r's - r s' = 1$. Namely, this is obvious for $n=1$ because $F_1 = \\frac{0}{1}, \\frac{1}{1}$. To deduce the claim for $F_n$ from the claim for $F_{n-1}$, let $\\frac{r}{s}, \\frac{r'}{s'}$ be consecutive elements of $F_{n-1}$. If $s+s' = n$, then for $m = r+r'$ we have $\\frac{r}{s} < \\frac{m}{n} < \\frac{r'}{s'}$ and the pairs $\\frac{r}{s},\\frac{m}{n}$ and $\\frac{m}{n}, \\frac{r'}{s'}$ \nsatisfy the desired conditions. Conversely, if $s+s' > n$, then we cannot have $\\frac{r}{s} < \\frac{m}{n} < \\frac{r'}{s'}$ for $a \\in \\ZZ$, as this yields the contradiction\n\\[\nn =(ms - nr)s' + (r'n - ms') \\geq s+s' > n;\n\\]\nhence $\\frac{r}{s}, \\frac{r'}{s'}$ remain consecutive in $F_n$. \n\nLet $f_n: [0,1] \\to \\RR$ be the piecewise linear function which agrees with $f$ at each element of $F_n$ and is linear between any two consecutive elements of $F_n$.\nBetween any two consecutive elements $\\frac{r}{s}, \\frac{r'}{s'}$ of $F_n$,\n$f_n$ coincides with some linear function $a+bx$. Since $s f(\\frac{r}{s}), s' f(\\frac{r'}{s'}) \\in \\ZZ$, we deduce first that\n\\[\nb = ss' (f(\\frac{r'}{s'}) - f(\\frac{r}{s}))\n\\]\nis an integer of absolute value at most $K$,\nand second that both $as = s f(\\frac{r}{s}) - br$ and $as' = s' f(\\frac{r'}{s'}) - br'$ are integral. It follows that $f_n$ is integral.\n\nWe now check that if $n > 2K$, then $f_n = f_{n-1}$. \nFor this, it suffices to check that for any consecutive elements $\\frac{r}{s}, \\frac{m}{n}, \\frac{r'}{s'}$ in $F_n$, the linear function $a_0 + b_0 x$ matching $f_{n-1}$ from $\\frac{r}{s}$ to $\\frac{r'}{s'}$ has the property that $f(\\frac{m}{n}) = a_0 + b_0 \\frac{m}{n}$. Define the integer $t = nf(\\frac{m}{n}) - a_0 n - b_0 m$. \nWe then compute that the slope of $f_n$ from $\\frac{r}{s}$ to $\\frac{m}{n}$ is $b_0+st$,\nwhile the slope of $f_n$ from $\\frac{m}{n}$ to $\\frac{r'}{s'}$ is at most $b_0 -s't$.\nIn order to have $\\left| b_0 + s t\\right|, \\left| b_0 - s' t\\right| \\leq K$, we must have\n$(s+s') \\left| t \\right| \\leq 2K$; since $s+s' = n > 2K$, this is only possible if $t=0$.\nHence $f_n = f_{n-1}$, as claimed.\n\nIt follows that for any $n > 2K$, we must have $f_n = f_{n+1} = \\cdots$. Since the condition on $f$ and $K$ implies that $f$ is continuous, we must also have $f_n = f$, completing the proof.\n\n\\noindent\n\\textbf{Remark:}\nThe condition on $f$ and $K$ is called \\emph{Lipschitz continuity}.\n\n\\noindent\n\\textbf{Remark:}\nAn alternate approach is to prove that for each $x  \\in [0,1)$, there exists $\\epsilon  \\in (0, 1-x)$ such that the restriction of $f$ to $[x, x+\\epsilon)$ is linear;\none may then deduce the claim using the compactness of $[0,1]$. In this approach, the role of the Farey sequence may also be played by the convergents of the continued fraction of $x$ (at least in the case where $x$ is irrational).\n\n\\noindent\n\\textbf{Remark:} This problem and solution are due to one of us (Kedlaya). Some related results can be proved with the Lipschitz continuity condition replaced by suitable convexity conditions.\n See for example: Kiran S. Kedlaya and Philip Tynan,\nDetecting integral polyhedral functions, \\textit{Confluentes Mathematici}\n\\textbf{1} (2009), 87--109.\nSuch results arise in the theory of $p$-adic differential equations; see for example:\nKiran S. Kedlaya and Liang Xiao, Differential modules on $p$-adic polyannuli, \\textit{J. Inst. Math. Jusssieu} \\textbf{9} (2010), 155--201 (errata, \\textit{ibid.}, 669--671)."
    }
  ]
}