{
  "year": "2003",
  "question_number": "6",
  "domain": "Putnam",
  "statement": "",
  "solution": [
    {
      "hint_level": 0,
      "content": "\\textbf{First solution:} (composite of solutions by Feng Xie and David\nPritchard)\nLet $\\mu$ denote Lebesgue measure on $[0,1]$. Define\n\\begin{align*}\nE_+ &= \\{x \\in [0,1]: f(x) \\geq 0\\} \\\\\nE_- &= \\{x \\in [0,1]: f(x) < 0\\};\n\\end{align*}\nthen $E_+$, $E_-$ are measurable and $\\mu(E_+) + \\mu(E_-) = 1$.\nWrite $\\mu_+$ and $\\mu_-$ for $\\mu(E_+)$ and $\\mu(E_-)$.\nAlso define\n\\begin{align*}\nI_+ &= \\int_{E_+} |f(x)|\\,dx \\\\\nI_- &= \\int_{E_-} |f(x)|\\,dx,\n\\end{align*}\nso that $\\int_0^1 |f(x)|\\,dx = I_+ + I_-$.\n\nFrom the triangle inequality $|a+b| \\geq \\pm(|a| - |b|)$,\nwe have the inequality\n\\begin{align*}\n&\\iint_{E_+ \\times E_-} |f(x) + f(y)|\\,dx\\,dy \\\\\n&\\geq\n\\pm \\iint_{E_+ \\times E_-} (|f(x)| - |f(y)|)\\,dx\\,dy \\\\\n&= \\pm ( \\mu_- I_+ - \\mu_+ I_-),\n\\end{align*}\nand likewise with $+$ and $-$ switched. Adding these inequalities together\nand allowing all possible choices of the signs, we get\n\\begin{align*}\n&\\iint_{(E_+ \\times E_-) \\cup (E_- \\times E_+)} |f(x) + f(y)|\\,dx\\,dy \\\\\n&\\geq\n\\max\\left\\{ 0, 2 (\\mu_- I_+ - \\mu_+ I_-), 2 (\\mu_+ I_- - \\mu_- I_+) \\right\\}.\n\\end{align*}\nTo this inequality, we add the equalities\n\\begin{align*}\n\\iint_{E_+ \\times E_+} |f(x) + f(y)|\\,dx\\,dy &= 2 \\mu_+ I_+ \\\\\n\\iint_{E_- \\times E_-} |f(x) + f(y)|\\,dx\\,dy &= 2 \\mu_- I_- \\\\\n-\\int_0^1 |f(x)|\\,dx &= -(\\mu_+ + \\mu_-)(I_+ + I_-)\n\\end{align*}\nto obtain\n\\begin{multline*}\n\\int_0^1 \\int_0^1 |f(x)+f(y)|\\,dx\\,dy - \\int_0^1 |f(x)|\\,dx \\\\\n\\geq \\max\\{ (\\mu_+ - \\mu_-)(I_+ + I_-)+ 2\\mu_-(I_- - I_+), \\\\\n(\\mu_+ - \\mu_-)(I_+ - I_-), \\\\\n(\\mu_- - \\mu_+)(I_+ + I_-)+ 2\\mu_+(I_+ - I_-) \\}.\n\\end{multline*}\nNow simply note that for each of the possible comparisons between\n$\\mu_+$ and $\\mu_-$, and between $I_+$ and $I_-$, one of the three\nterms above is manifestly nonnegative. This yields the desired result.\n\n\\textbf{Second solution:}\nWe will show at the end that it\nis enough to prove a discrete analogue: if $x_1, \\dots, x_n$\nare real numbers, then\n\\[\n\\frac{1}{n^2} \\sum_{i,j=1}^n |x_i + x_j| \\geq \\frac{1}{n}\n\\sum_{i=1}^n |x_i|.\n\\]\nIn the meantime, we concentrate on this assertion.\n\nLet $f(x_1, \\dots, x_n)$ denote the difference between the two sides.\nWe induct\non the number of nonzero values of $|x_i|$. We leave for later the base case,\nwhere there is at most one such value. Suppose instead for now that there\nare two or more. Let $s$ be the smallest, and suppose without loss of\ngenerality that $x_1 = \\cdots = x_a = s$, $x_{a+1} = \\cdots = x_{a+b} = -s$,\nand for $i > a+b$, either $x_i = 0$ or $|x_i| > s$. (One of $a,b$ might be\nzero.)\n\nNow consider\n\\[\nf(\\overbrace{t, \\cdots,t}^{\\mbox{$a$ terms}},\\overbrace{-t,\\cdots,-t}^{\\mbox{$b$ terms}},x_{a+b+1},\\cdots, x_n)\n\\]\nas a function of $t$.\nIt is piecewise linear near $s$; in fact, it is\nlinear between 0 and\nthe smallest nonzero value among $|x_{a+b+1}|, \\dots, |x_n|$\n(which exists by hypothesis). Thus its minimum is achieved by one (or both)\nof those two endpoints. In other words, we can reduce the\nnumber of distinct nonzero absolute values among the $x_i$ without\nincreasing $f$. This\nyields the induction, pending verification of the base case.\n\nAs for the base case, suppose that $x_1 = \\cdots = x_a = s > 0$,\n$x_{a+1} = \\cdots = x_{a+b} = -s$, and $x_{a+b+1} = \\cdots = x_n = 0$.\n(Here one or even both of $a,b$ could be zero, though the latter case\nis trivial.)\nThen\n\\begin{multline*}\nf(x_1, \\dots, x_n) = \\frac{s}{n^2} (2a^2 + 2b^2 + (a+b)(n-a-b)) \\\\\n- \\frac{s}{n} (a+b) = \\frac{s}{n^2} (a^2 -2ab + b^2) \\geq 0.\n\\end{multline*}\nThis proves the base case of the induction, completing the solution\nof the discrete analogue.\n\nTo deduce the original statement from the discrete analogue,\napproximate both integrals\nby equally-spaced Riemann sums and take limits. This works because\ngiven a continuous function\non a product of closed intervals,\nany sequence of Riemann sums with mesh size tending to zero\nconverges to the integral. (The domain is compact, so\nthe function is uniformly continuous. Hence for any $\\epsilon > 0$\nthere is a cutoff below\nwhich any mesh size forces the\ndiscrepancy between the Riemann sum and the integral to be less than\n$\\epsilon$.)\n\nAlternate derivation (based on a solution by Dan Bernstein):\nfrom the discrete analogue, we have\n\\[\n\\sum_{1 \\leq i<j\\leq n} |f(x_i) + f(x_j)| \\geq \\frac{n-2}{2}\n\\sum_{i=1}^n |f(x_i)|,\n\\]\nfor all $x_1, \\dots, x_n \\in [0,1]$. Integrating both sides as\n$(x_1, \\dots, x_n)$ runs over\n$[0,1]^n$ yields\n\\begin{align*}\n&\\frac{n(n-1)}{2} \\int_0^1 \\int_0^1 |f(x)+f(y)|\\,dy\\,dx \\\\\n&\\geq\n\\frac{n(n-2)}{2} \\int_0^1 |f(x)|\\,dx,\n\\end{align*}\nor\n\\[\n\\int_0^1 \\int_0^1 |f(x)+f(y)|\\,dy\\,dx\n\\geq\n\\frac{n-2}{n-1} \\int_0^1 |f(x)|\\,dx.\n\\]\nTaking the limit as $n \\to \\infty$ now yields the desired result.\n\n\\textbf{Third solution:} (by David Savitt)\nWe give an argument which yields the following improved result.  Let\n$\\mu_p$ and $\\mu_n$ be the measure of the sets $\\{ x \\ : \\ f(x) > 0\\}$ and\n$\\{ x \\ : \\ f(x) < 0\\}$ respectively, and let $\\mu \\le 1/2$ be\n$\\min(\\mu_p,\\mu_n)$.  Then\n\\begin{align*}\n& \\int_{0}^{1} \\int_{0}^{1} |f(x) + f(y)|\\,dx\\,dy \\\\\n&\\ge (1 + (1-2\\mu)^2)\n\\int_{0}^{1} |f(x)|\\,dx.\n\\end{align*}\nNote that the constant can be seen to be best possible by considering a\nsequence of functions tending towards the step function which is $1$ on\n$[0,\\mu]$ and $-1$ on $(\\mu,1]$.\n\nSuppose without loss of generality that $\\mu = \\mu_p$.  As in the second\nsolution, it suffices to prove a\nstrengthened discrete analogue, namely\n\\[\n\\frac{1}{n^2} \\sum_{i,j} |a_i + a_j| \\ge\n    \\left(1 + \\left(1 - \\frac{2p}{n}\\right)^2\\right)\\left(\\frac{1}{n}\n    \\sum_{i=1}^{n} |a_i| \\right),\n\\]\nwhere $p \\le n/2$ is the number of $a_1,\\ldots,a_n$ which are positive.\n(We need only make sure to choose meshes so that $p/n \\to \\mu$ as\n$n \\to \\infty$.)\nAn equivalent inequality is\n\\[\n\\sum_{1 \\le i < j \\le n} | a_i + a_j | \\ge \\left(n - 1 - 2p +\n    \\frac{2p^2}{n}\\right) \\sum_{i=1}^{n} | a_i |.\n\\]\n\nWrite $r_i = |a_i|$, and assume without loss of generality that $r_i \\ge\nr_{i+1}$ for each $i$. Then for $i<j$,\n$|a_i + a_j| = r_i + r_j$ if $a_i$ and $a_j$\nhave the same sign, and is $r_i - r_j$ if they have opposite signs. The\nleft-hand side is therefore equal to\n\\[\n\\sum_{i = 1}^n (n - i) r_i + \\sum_{j = 1}^n r_j C_j,\n\\]\nwhere\n\\begin{multline*}\nC_j = \\#\\{ i < j \\ : \\sgn(a_i) = \\sgn(a_j)\\} \\\\\n- \\#\\{ i < j : \\sgn(a_i) \\neq \\sgn(a_j)\\}.\n\\end{multline*}\n\nConsider the partial sum $P_k = \\sum_{j = 1}^{k} C_j$.  If exactly $p_k$ of\n$a_1,\\ldots,a_k$ are positive, then this sum is equal to\n\\[\n\\binom{p_k}{2} + \\binom{k-p_k}{2} - \\left[ \\binom {k}{2} -\n\\binom{p_k}{2} - \\binom{k-p_k}{2} \\right],\n\\]\nwhich expands and simplifies to\n\\[\n-2 p_k (k-p_k) + \\binom{k}{2} \\,.\n\\]\nFor $k \\le 2p$ even, this partial sum would be minimized with $p_k = \\frac{k}{2}$,\nand would then equal $-\\frac{k}{2}$; for $k < 2p$ odd, this partial sum would\nbe minimized with $p_k = \\frac{k \\pm 1}{2}$, and would then equal\n$-\\frac{k-1}{2}$.  Either way, $P_k \\ge - \\lfloor \\frac{k}{2} \\rfloor$.  On the other\nhand, if $k > 2p$, then\n\\[\n-2 p_k (k-p_k) + \\binom{k}{2} \\ge -2 p(k-p) + \\binom{k}{2}\n\\]\nsince $p_k$ is at most $p$. Define $Q_k$ to\nbe $- \\lfloor \\frac{k}{2} \\rfloor$ if $k \\le\n2p$ and $-2 p(k-p) + \\binom{k}{2}$ if $k \\ge 2p$, so that $P_k \\ge Q_k$.  Note\nthat $Q_1=0$.\n\nPartial summation gives\n\\begin{align*}\n\\sum_{j = 1}^n r_j C_j & =  r_n P_n + \\sum_{j=2}^{n} (r_{j-1} - r_j)\nP_{j-1} \\\\\n& \\ge r_n Q_n + \\sum_{j=2}^{n} (r_{j-1} - r_j) Q_{j-1} \\\\\n& =  \\sum_{j=2}^{n} r_j (Q_j - Q_{j-1}) \\\\\n& =  - r_2 - r_4 - \\cdots - r_{2p} + \\sum_{j = 2p+1}^{n} (j-1-2p) r_j.\n\\end{align*}\nIt follows that\n\\begin{align*}\n\\sum_{1 \\le i < j \\le n} | a_i + a_j | \n    &= \\sum_{i = 1}^n (n - i) r_i + \\sum_{j = 1}^n r_j C_j \\\\\n& \\ge \\sum_{i = 1}^{2p} (n - i - [ i \\ \\text{even}]) r_i \\\\\n&\\quad + \\sum_{i = 2p+1}^{n} (n - 1 - 2p) r_i \\\\\n&  = (n-1-2p) \\sum_{i=1}^{n} r_i \\\\\n&\\quad + \\sum_{i=1}^{2p} (2p + 1 - i - [i \\ \\text{even}]) r_i \\\\\n&  \\ge  (n-1-2p) \\sum_{i=1}^{n} r_i + p \\sum_{i=1}^{2p} r_i \\\\\n&  \\ge  (n-1-2p) \\sum_{i=1}^{n} r_i + p\\frac{2p}{n} \\sum_{i=1}^{n} r_i\\,,\n\\end{align*}\nas desired.  The next-to-last and last inequalities each follow from the\nmonotonicity of the $r_i$'s, the former by pairing the $i^{\\textrm{th}}$\nterm with the $(2p+1-i)^{\\textrm{th}}$.\n\n\\textbf{Note:}\nCompare the closely related Problem 6 from the 2000 USA Mathematical\nOlympiad: prove that\nfor any nonnegative real numbers $a_1, \\dots, a_n, b_1, \\dots, b_n$,\none has\n\\[\n\\sum_{i,j=1}^n \\min\\{a_i a_j,b_i b_j\\} \\leq\n\\sum_{i,j=1}^n \\min\\{a_i b_j,a_j b_i\\}.\n\\]"
    }
  ]
}