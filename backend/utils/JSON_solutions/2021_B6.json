{
  "year": "2021",
  "question_number": "6",
  "domain": "Putnam",
  "statement": "",
  "solution": [
    {
      "hint_level": 0,
      "content": "\\noindent\n\\textbf{First solution.}\n(based on a suggestion of Noam Elkies)\nLet $f_k(x)$ be the probability distribution of $X_k$, the last number remaining when one repeatedly trims a list of $3^k$ random variables chosen with respect to the uniform distribution on $[0,1]$; note that $f_0(x) = 1$ for $x \\in [0,1]$.\nLet $F_k(x)=\\int_0^x f_k(t)\\,dt$ be the cumulative distribution function; by symmetry,\n$F_k(\\frac{1}{2}) = \\frac{1}{2}$.\nLet $\\mu_k$ be the expected value of $X_k - \\frac{1}{2}$; then $\\mu_0 = \\frac{1}{4}$, so it will suffice to prove that $\\mu_{k} \\geq \\frac{2}{3} \\mu_{k-1}$ for $k > 0$.\n\nBy integration by parts and symmetry, we have\n\\[\n\\mu_k = 2 \\int_0^{1/2} \\left( \\frac{1}{2} - x \\right) f_k(x)\\,dx  = 2 \\int_0^{1/2} F_k(x)\\,dx;\n\\]\nthat is, $\\mu_k$ computes twice the area under the curve $y = F_k(x)$ for $0 \\leq x \\leq\\frac{1}{2}$. Since $F_k$ is a monotone function from $[0, \\frac{1}{2}]$ \nwith $F_k(0) = 0$ and $F_k(\\frac{1}{2}) = \\frac{1}{2}$, we may transpose the axes to obtain\n\\begin{equation} \\label{eq:2021B6 eq4}\n\\mu_k = 2 \\int_0^{1/2} \\left( \\frac{1}{2} - F_k^{-1}(y) \\right)\\,dy.\n\\end{equation}\n\nSince $f_k(x)$ is the probability distribution of the median of three random variables chosen with respect to the distribution $f_{k-1}(x)$,\n\\begin{equation} \\label{eq:2021B6 eq1}\nf_k(x) = 6 f_{k-1}(x) F_{k-1}(x) ( 1-F_{k-1}(x) )\n\\end{equation}\nor equivalently\n\\begin{equation} \\label{eq:2021B6 eq2}\nF_k(x) = 3 F_{k-1}(x)^2 - 2 F_{k-1}(x)^3.\n\\end{equation}\nBy induction, $F_k$ is the $k$-th iterate of $F_1(x) = 3x^2 -2x^3$, so\n\\begin{equation} \\label{eq:2021B6 eq5}\nF_k(x) = F_{k-1}(F_1(x)).\n\\end{equation}\nSince $f_1(t) = 6t(1-t) \\leq \\frac{3}{2}$ for $t \\in [0,\\frac{1}{2}]$,\n\\[\n\\frac{1}{2} - F_1(x) = \\int_x^{1/2} 6t(1-t)\\,dt \\leq \\frac{3}{2}\\left(\\frac{1}{2}-x\\right);\n\\]\nfor $y \\in [0, \\frac{1}{2}]$, we may take $x = F_{k}^{-1}(y)$ to obtain\n\\begin{equation} \\label{eq:2021B6 eq3}\n\\frac{1}{2} - F_k^{-1}(y) \\geq \\frac{2}{3} \\left( \\frac{1}{2} - F_{k-1}^{-1}(y) \\right).\n\\end{equation}\nUsing \\eqref{eq:2021B6 eq5} and \\eqref{eq:2021B6 eq3}, we obtain\n\\begin{align*}\n\\mu_k &= 2 \\int_0^{1/2} \\left( \\frac{1}{2} - F_k^{-1}(y) \\right) \\,dy \\\\\n&\\geq \\frac{4}{3} \\int_0^{1/2} \\left( \\frac{1}{2} - F_{k-1}^{-1}(y) \\right) \\,dy = \\frac{2}{3}\\mu_{k-1}\n\\end{align*}\nas desired.\n\n\\noindent\n\\textbf{Second solution.}\nRetain notation as in the first solution. Again $F_k(\\frac{1}{2}) = \\frac{1}{2}$, so \\eqref{eq:2021B6 eq1} implies\n\\[\nf_k\\left( \\frac{1}{2} \\right) = 6 f_{k-1} \\left( \\frac{1}{2} \\right) \\times \\frac{1}{2} \\times \\frac{1}{2}.\n\\]\nBy induction on $k$, we deduce that %$f_k(x)$ is a polynomial in $x$,\n$f_k(\\frac{1}{2}) = (\\frac{3}{2})^k$\nand $f_k(x)$ is nondecreasing on $[0,\\frac{1}{2}]$.\n(More precisely, besides \\eqref{eq:2021B6 eq1}, the second assertion uses that $F_{k-1}(x)$ increases from $0$ to $1/2$\nand $y \\mapsto y - y^2$ is nondecreasing on $[0, 1/2]$.)\n\nThe expected value of $|X_k-\\frac{1}{2}|$ equals\n\\begin{align*}\n\\mu_k &= 2 \\int_0^{1/2} \\left( \\frac{1}{2} - x \\right) f_k(x)\\,dx \\\\\n&= 2 \\int_0^{1/2} x f_k\\left( \\frac{1}{2} - x \\right)\\,dx.% \\\\\n%&= \\int_0^{1/2} \\left( \\frac{1}{2} - F_k\\left( \\frac{1}{2} - x \\right)\\right)\\,dx \\\\\n\\end{align*}\n%where the last step is integration by parts. Define the function\nDefine the function\n\\[\ng_k(x) = \\begin{cases} \\left( \\frac{3}{2} \\right)^k & x \\in \\left[ 0, \\frac{1}{2} \\left( \\frac{2}{3} \\right)^k \\right] \\\\ 0 & \\mbox{otherwise}.\n\\end{cases}\n\\]\nNote that for $x \\in [0, 1/2]$ we have\n\\[\n\\int_0^x (g_k(t) - f_k(1/2-t))\\,dt \\geq 0\n\\]\nwith equality at $x=0$ or $x=1/2$. (On the interval $[0, (1/2)(2/3)^k]$ the integrand is nonnegative, so the function increases from 0; on the interval $[(1/2)(2/3)^k, 1/2]$ the integrand is nonpositive, so the function decreases to 0.)\nHence by integration by parts,\n\\begin{align*}\n&\\mu_k - 2 \\int_0^{1/2} x g_k(x) \\,dx \\\\\n&\\quad = \\int_0^{1/2} 2x (f_k\\left( \\frac{1}{2} - x \\right) - g_k(x)) \\,dx \\\\\n&\\quad = \\int_0^{1/2} x^2 \\left( \\int_0^x g_k(t) - \\int_0^x f_k\\left( \\frac{1}{2} - t \\right)\\,dt \\,dt \\right)\\,dx \\geq 0. \n\\end{align*}\n(This can also be interpreted as an instance of the \\emph{rearrangement inequality}.)\n\nWe now see that\n\\begin{align*}\n\\mu_k &\\geq 2\\int_0^{1/2} x g_k(x)\\,dx \\\\\n&\\quad \\geq 2 \\left( \\frac{3}{2} \\right)^k \\int_0^{(1/2)(2/3)^k} x\\,dx\\\\\n&\\quad = 2 \\left( \\frac{3}{2} \\right)^k \\left. \\frac{1}{2} x^2 \\right|_0^{(1/2)(2/3)^k} \\\\\n&\\quad = 2 \\left( \\frac{3}{2} \\right)^k \\frac{1}{8} \\left( \\frac{2}{3} \\right)^{2k}  = \\frac{1}{4} \\left( \\frac{2}{3} \\right)^k\n\\end{align*}\nas desired.\n\n\n\n\\noindent\n\\textbf{Remark.}\nFor comparison, if we instead take the median of a list of $n$ numbers, the probability distribution is given by\n\\[\nP_{2n+1}(x) = \\frac{(2n+1)!}{n!n!} x^n (1-x)^n.\n\\]\nThe expected value of the absolute difference between $1/2$ and the median is \n\\[\n2 \\int_0^{1/2} (1/2 - x) P_{2n+1}(x) dx = 2^{-2n-2}{{2n+1}\\choose n}.\n\\]\nFor $n = 3^{2021}$, using Stirling's approximation this can be estimated as\n$1.13 (0.577)^{2021} < 0.25 (0.667)^{2021}$. This shows that the trimming procedure produces a quantity that is on average further away from 1/2 than the median."
    }
  ]
}